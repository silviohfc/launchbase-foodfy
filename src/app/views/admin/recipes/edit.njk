{% extends "admin/layout.njk" %}

{% block content %}

        <div class="actionHeader">
            <h2>Editando receita</h2>
            <div class="actionButtons">
                <div class="actionButton">

                    <form action="/admin/recipes?_method=DELETE" method="POST" id="form-delete">
                        <input type="hidden" name="id" value="{{ recipe.id }}">
                        <button type="submit" id="delete">Deletar</a>
                    </form>
                    
                </div>

                <div class="actionButton">
                    
                    <form action="/admin/recipes?_method=PUT" method="POST">
    
                    <input type="hidden" name="id" value="{{ recipe.id }}">
                    <button type="submit">Salvar receita</a>
                </div>
            </div>
        </div>

        {% include "admin/recipes/fields.njk" %}
        
    </form>

    <script src="/scripts.js"></script>
    
    <script>
        const formDelete = document.querySelector("#form-delete")
        
        formDelete.addEventListener("submit", e => {
            const confirmation = confirm("Tem certeza que deseja deletar esta receita?")
            if(!confirmation) {
                e.preventDefault()
            }
        })
    </script>
{% endblock %}
   